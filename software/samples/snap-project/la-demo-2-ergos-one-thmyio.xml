<project name="la-demo" app="Snap! 4.0, http://snap.berkeley.edu" version="1"><notes></notes><thumbnail>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAB4CAYAAAB1ovlvAAAGXElEQVR4Xu2dbUyVZRzGrwOcDgdMYByPvEQNg1yxnGsDTbGyZsPmzAazlmu21lovGrVZmZW2tbaaW2aryaovLpT1toHZhzZKZ6HI0iYLFSh2CCUR4xxaDI4cfBo42UgHN5znfv5351x8vp/r+j+/+7fnA9u5b5dlWRb4RwJCBFwUUIg8a8cIUECKIEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0A6IEqAAoriZzkFpAOiBCigKH6WU0CDHBgcHITX6x2fqPHXZmysq0b9hteQlpZm0KT2jUIB7WMZddLzO7cjIcWLreWP4uJIBKvaD8GTkID985cjIyMj6nwTAyigQbtyoPEwHvSeQ7g9gGWRZBy4fwEWt/ViX+FdyMzMNGhS+0ahgPaxtCVpS30t3i32w0r2wEpwYcmxTtQVLIPP57Ml37QQCmjYjgS6z2L52SMILJw3NtmdPwdQe3Mp/H6/YZPaMw4FtIejrSnv136BzffkIZzqQVFnEPWzipCVlWVrhylhFNCUnfjPHEt2v4cja5ehsHcAB5NuQU5OjqGTRjcWBYyOn7anG9tO4gH3GWS6knDQPR+5ubnauiSDKaAk/Sm611VX4WhJPg54b0NeXp7Bk858NAo4c3ban+zt60Ppjm34dn0lCgoKtPdJFFBACersHCdAASmDKAEKKIqf5RSQDogSoICi+FlOAemAKAEKKIqf5RSQDogSoICi+FlOAemAKAEKKIqf5RSQDogSoICi+FlOAQ1y4KfDTfjhUBO2bt5g0FR6R6GAevkqpx870YZHXj+ENQtD2P7WJuXn/u8LKaABO9ja2orVLzeg44IHNS96UFFRYcBUzoxAAR3gHAqFkJ6efs2m3zq68PBLdTj+5xx4EcKujdlYcXcxcnKyHZhMvoICatyDlpYW1NRW4WRnA/bsbJhw7MZobU9PD8qe/hwnzvlguRLhcllIHL6AW/M8KJrTi5qqLRqnMyOaAtq4DwMDA/jjTAdOBZrw5XcfYcR3GtenebBu4W7cu3T1hKbunr+w6pm9+OXc5d/7JlhhuK1/kJ/lwY2zerBysR8vbHjSxunMjKKANuxLV1cXar7+FGcv/oi/Pc245A4hyTsCV8SD4pRteGLtJrjd7vGmcDiMkrW70Hx+DlKHAyj0BfHYQ6VYdEch8nMzMHfuXCQmJtowmfkRFDDKPdrz1Sf4rP5V+BeE4E4eAVyXA61hN/KHH8cbz308ocGyLKyv3IHzwTDKSjJRvmZlzP7iTQUtBVShNMmaUCiIzu52nO44jv1HP8B1806NrfZ0Lcf2TfuQmjLrqqeDwSBmz54dN1+5yRBTwCgFvPL46Jft2TdXYOiG7zH8++2ofqfZpuTYjqGANu3v0NAQXvmwDJeS+7C5/BvkZt9kU3Jsx1BAm/Z39H99b1c9hYr7KrGoeKlNqbEfQwFt2uNIJIL+/v6YPUjSJkxXxVBAXWSZq0SAAiph4iJdBCigLrLMVSJAAZUwcZEuAhRQF1nmKhGggEqYuEgXAQqoiyxzlQhQQCVMXKSLAAXURZa5SgQooBImLtJFgALqIstcJQIUUAkTF+kiQAF1kWWuEgEKqISJi3QRoIC6yDJXiQAFVMLERboIUEBdZJmrRIACKmHiIl0EKKAussxVIkABlTBxkS4CFFAXWeYqEaCASpjiY5HECa0UMD7cmvItpU5opYBTbk3sL5A8oZUCxr5fk76h9AmtFDCOBTThhFYKGKcCmnJCKwWMQwFNOqGVAsaZgKad0EoB40zA0dc16YRWChiHApr0yhTQpN2Iw1koYBxu+pVXnuwGJ6ewUECnSBvUM9UNTk6OSgGdpC3UNZ0bnJwekQI6TdzBvune4OTgaONVFFCCugOd073ByYGRrllBAaXIa+6dyQ1OmkeigBKApTtNv8GJX0BpQzT3m36DEwXULIB0vOk3OFFAaUM095t+gxMF1CwA4ycnQAFpiCgBCiiKn+UUkA6IEqCAovhZTgHpgCgBCiiKn+UUkA6IEvgXj4GHxvFIi6cAAAAASUVORK5CYII=</thumbnail><stage name="Stage" width="480" height="360" costume="0" tempo="60" threadsafe="false" lines="round" codify="false" inheritance="false" sublistIDs="false" scheduled="false" id="1"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAAOhUlEQVR4Xu3VwQkAAAjEMN1/abewn7jAQRC64wgQIECAAIF3gX1fNEiAAAECBAiMAHsCAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQIHLFxAWmhEwHPAAAAAElFTkSuQmCC</pentrails><costumes><list id="2"></list></costumes><sounds><list id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="sub-gate" idx="3" x="136.0000000000009" y="-116.00000000000017" heading="239" scale="1" rotation="1" draggable="true" costume="0" color="0,57.22199999999997,168.3" pen="tip" id="8"><costumes><list id="9"></list></costumes><sounds><list id="10"></list></sounds><variables><variable name="host"><l>submarine-gate.local</l></variable><variable name="port"><l>6969</l></variable><variable name="rest position"><list id="12"><item><l>0</l></item><item><l>0</l></item><item><l>-90</l></item><item><l>-80</l></item></list></variable></variables><blocks></blocks><scripts><script x="105" y="33"><block s="receiveGo"></block><block s="doSetVar"><l>host</l><l>submarine-gate.local</l></block><block s="doSetVar"><l>port</l><l>6969</l></block><block s="doSetVar"><l>rest position</l><block s="reportNewList"><list><l>0</l><l>0</l><l>-90</l><l>-80</l></list></block></block><block s="doSayFor"><custom-block s="$robot test connection"></custom-block><l>2</l></block><custom-block s="$robot set motor(s) %s %txt"><custom-block s="$robot all motors"></custom-block><l>stiff</l></custom-block><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><block var="rest position"/><custom-block s="$robot all motors"></custom-block><l>2</l><l/></custom-block><custom-block s="$robot %txt behaviours %txt"><l>start</l><l>colored_balls_detection</l></custom-block><block s="doForever"><script><block s="bubble"><custom-block s="$robot get detected balls in conveyor"></custom-block></block><block s="doWait"><l>1</l></block></script></block></script></scripts></sprite><sprite name="Conveyor" idx="2" x="74" y="48" heading="164" scale="1" rotation="1" draggable="true" costume="0" color="0,249.9,204.91799999999998" pen="tip" id="57"><costumes><list id="58"></list></costumes><sounds><list id="59"></list></sounds><variables><variable name="thymio hostname"><l>hibiscus.local</l></variable><variable name="thymio port"><l>3000</l></variable><variable name="thymio node"><l>22972</l></variable></variables><blocks></blocks><scripts><script x="62" y="30"><block s="receiveGo"></block><custom-block s="$turtle init Thymio host %txt port %n"><l>hibiscus.local</l><l>3000</l></custom-block><block s="doWait"><l>5</l></block><block s="doBroadcast"><block s="reportNewList"><list><l>conveyor free</l><block s="reportGet"><l><option>self</option></l></block></list></block></block><block s="doSetVar"><l>thymio</l><block s="reportGet"><l><option>self</option></l></block></block></script><script x="44" y="215"><block s="receiveMessage"><l><option>any message</option></l></block><block s="doIf"><block s="reportEquals"><block s="getLastMessage"></block><block s="reportNewList"><list><l>conveyor free</l><block s="reportGet"><l><option>self</option></l></block></list></block></block><script><custom-block s="$turtle %txt follow line"><l>start</l></custom-block></script></block></script><script x="419" y="209"><block s="receiveMessage"><l><option>any message</option></l></block><block s="doIf"><block s="reportEquals"><block s="getLastMessage"></block><block s="reportNewList"><list><l>conveyor stop</l><block s="reportGet"><l><option>self</option></l></block></list></block></block><script><custom-block s="$turtle %txt follow line"><l>stop</l></custom-block></script></block></script><script x="61" y="403"><custom-block s="$turtle %txt follow line"><l>stop</l></custom-block></script></scripts></sprite><sprite name="sub-crane" idx="1" x="144" y="-130" heading="56" scale="1" rotation="1" draggable="true" costume="0" color="98.02199999999998,158.1,0" pen="tip" id="123"><costumes><list id="124"></list></costumes><sounds><list id="125"></list></sounds><variables><variable name="rest pose"><list id="127"><item><l>0</l></item><item><l>-100</l></item><item><l>45</l></item><item><l>0</l></item><item><l>55</l></item></list></variable><variable name="above pose"><list id="128"><item><l>0</l></item><item><l>30</l></item><item><l>25</l></item><item><l>0</l></item><item><l>20</l></item></list></variable><variable name="grab pose 2"><list id="129"><item><l>0</l></item><item><l>55</l></item><item><l>20</l></item><item><l>0</l></item><item><l>-10</l></item></list></variable><variable name="grab pose 1"><list id="130"><item><l>0</l></item><item><l>55</l></item><item><l>20</l></item><item><l>0</l></item><item><l>0</l></item></list></variable><variable name="drop pose"><list id="131"><item><l>50</l></item><item><l>20</l></item><item><l>-15</l></item><item><l>0</l></item><item><l>30</l></item></list></variable><variable name="host"><l>submarine-crane.local</l></variable><variable name="port"><l>6969</l></variable><variable name="gate"></variable><variable name="hold ball color"><l>None</l></variable></variables><blocks><block-definition s="$robot get ball color" type="reporter" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/</l><l>color_ball_detection</l><l>/call/</l><l>get_color</l></list></block></block></block></script><scripts><script x="511.9951181875" y="221.000001"><block var="color"/></script></scripts></block-definition></blocks><scripts><script x="30" y="34.99999999999994"><block s="receiveGo"></block><block s="doSetVar"><l>host</l><l>submarine-crane.local</l></block><block s="doSetVar"><l>port</l><l>6969</l></block><block s="doSetVar"><l>rest pose</l><block s="reportNewList"><list><l>0</l><l>-100</l><l>45</l><l>0</l><l>55</l></list></block></block><block s="doSetVar"><l>above pose</l><block s="reportNewList"><list><l>0</l><l>30</l><l>25</l><l>0</l><l>20</l></list></block></block><block s="doSetVar"><l>grab pose 1</l><block s="reportNewList"><list><l>0</l><l>55</l><l>20</l><l>0</l><l>0</l></list></block></block><block s="doSetVar"><l>grab pose 2</l><block s="reportNewList"><list><l>0</l><l>55</l><l>20</l><l>0</l><l>-10</l></list></block></block><block s="doSetVar"><l>drop pose</l><block s="reportNewList"><list><l>50</l><l>20</l><l>-15</l><l>0</l><l>30</l></list></block></block><block s="doSetVar"><l>hold ball color</l><l>None</l></block><block s="doSetVar"><l>gate</l><block s="reportListItem"><l>1</l><block s="reportGet"><l><option>neighbors</option></l></block></block></block><block s="doSayFor"><custom-block s="$robot test connection"></custom-block><l>2</l></block><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><l>off</l></custom-block><custom-block s="$robot %txt behaviours %txt"><l>start</l><l>color_ball_detection</l></custom-block><custom-block s="$robot set motor(s) %s %txt"><custom-block s="$robot all motors"></custom-block><l>stiff</l></custom-block><custom-block s="$robot goto rest position while holding %b"><l/></custom-block><custom-block s="$robot close gripper"></custom-block><block s="doForever"><script><block s="doWaitUntil"><custom-block s="$robot contact"></custom-block></block><block s="doRun"><custom-block s="ask %s for %repRing"><block var="thymio"/><block s="reifyScript"><script><custom-block s="$turtle %txt follow line"><l>stop</l></custom-block><block s="doReport"><l></l></block></script><list></list></block></custom-block><list></list></block><block s="doBroadcastAndWait"><block s="reportNewList"><list><l>conveyor ready</l><block var="thymio"/><block s="reportGet"><l><option>self</option></l></block></list></block></block><block s="doWait"><l>10</l></block></script></block></script><script x="422" y="615"><custom-block s="$robot goto rest position while holding %b"><l/></custom-block><block s="doForever"><script><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><custom-block s="$robot get ball color" scope="sub-crane"></custom-block></custom-block><custom-block s="$robot grasp ball"></custom-block><custom-block s="$robot drop ball"></custom-block></script></block></script><script x="427" y="25.999999999999943"><block s="receiveMessage"><l><option>any message</option></l></block><block s="doDeclareVariables"><list><l>conveyor</l><l>msg</l></list></block><block s="doSetVar"><l>msg</l><block s="getLastMessage"></block></block><block s="doIf"><block s="reportAnd"><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="msg"/></block><l>conveyor ready</l></block><block s="reportEquals"><block s="reportListItem"><l>3</l><block var="msg"/></block><block s="reportGet"><l><option>self</option></l></block></block></block><script><block s="doSetVar"><l>conveyor</l><block s="reportListItem"><l>2</l><block var="msg"/></block></block><block s="doIfElse"><custom-block s="$robot is holding"></custom-block><script><block s="doIf"><block s="reportEquals"><custom-block s="average %s"><custom-block s="$robot colors seen by %s"><block var="gate"/></custom-block></custom-block><block var="hold ball color"/></block><script><custom-block s="$robot drop ball"></custom-block><block s="doSetVar"><l>hold ball color</l><l>None</l></block><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><l>off</l></custom-block><custom-block s="$robot goto rest position while holding %b"><l/></custom-block><custom-block s="$robot close gripper"></custom-block></script></block></script><script><custom-block s="$robot goto rest position while holding %b"><block s="reportFalse"></block></custom-block><block s="doSetVar"><l>hold ball color</l><custom-block s="$robot get ball color" scope="sub-crane"></custom-block></block><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><block var="hold ball color"/></custom-block><custom-block s="$robot grasp ball"></custom-block></script></block><block s="doBroadcast"><block s="reportNewList"><list><l>conveyor free</l><block var="conveyor"/></list></block></block></script></block></script></scripts></sprite><sprite name="pessac-gate" idx="5" x="40" y="-14" heading="239" scale="1" rotation="1" draggable="true" costume="0" color="0,57.22199999999997,168.3" pen="tip" id="368"><costumes><list id="369"></list></costumes><sounds><list id="370"></list></sounds><variables><variable name="host"><l>pessac-gate.local</l></variable><variable name="port"><l>6969</l></variable><variable name="rest position"><list id="372"><item><l>0</l></item><item><l>0</l></item><item><l>-90</l></item><item><l>-80</l></item></list></variable></variables><blocks></blocks><scripts><script x="105" y="33"><block s="receiveGo"></block><block s="doSetVar"><l>host</l><l>pessac-gate.local</l></block><block s="doSetVar"><l>port</l><l>6969</l></block><block s="doSetVar"><l>rest position</l><block s="reportNewList"><list><l>0</l><l>0</l><l>-90</l><l>-80</l></list></block></block><block s="doSayFor"><custom-block s="$robot test connection"></custom-block><l>2</l></block><custom-block s="$robot set motor(s) %s %txt"><custom-block s="$robot all motors"></custom-block><l>stiff</l></custom-block><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><block var="rest position"/><custom-block s="$robot all motors"></custom-block><l>2</l><l/></custom-block><custom-block s="$robot %txt behaviours %txt"><l>start</l><l>colored_balls_detection</l></custom-block><block s="doForever"><script><block s="bubble"><custom-block s="$robot get detected balls in conveyor"></custom-block></block><block s="doWait"><l>1</l></block></script></block></script></scripts></sprite><sprite name="Pessac-crane" idx="4" x="30" y="-4" heading="56" scale="1" rotation="1" draggable="true" costume="0" color="98.02199999999998,158.1,0" pen="tip" id="417"><costumes><list id="418"></list></costumes><sounds><list id="419"></list></sounds><variables><variable name="rest pose"><list id="421"><item><l>0</l></item><item><l>-100</l></item><item><l>45</l></item><item><l>0</l></item><item><l>55</l></item></list></variable><variable name="above pose"><list id="422"><item><l>0</l></item><item><l>40</l></item><item><l>10</l></item><item><l>0</l></item><item><l>20</l></item></list></variable><variable name="grab pose 2"><list id="423"><item><l>0</l></item><item><l>60</l></item><item><l>10</l></item><item><l>0</l></item><item><l>-10</l></item></list></variable><variable name="grab pose 1"><list id="424"><item><l>0</l></item><item><l>60</l></item><item><l>10</l></item><item><l>0</l></item><item><l>0</l></item></list></variable><variable name="drop pose"><list id="425"><item><l>-40</l></item><item><l>40</l></item><item><l>-25</l></item><item><l>0</l></item><item><l>10</l></item></list></variable><variable name="host"><l>pessac-crane.local</l></variable><variable name="port"><l>6969</l></variable><variable name="gate"></variable><variable name="hold ball color"><l>blue</l></variable></variables><blocks><block-definition s="$robot get ball color" type="reporter" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/</l><l>color_ball_detection</l><l>/call/</l><l>get_color</l></list></block></block></block></script><scripts><script x="511.9951181875" y="221.000001"><block var="color"/></script></scripts></block-definition></blocks><scripts><script x="532" y="709.9999999999999"><custom-block s="$robot goto %s"><block var="rest pose"/></custom-block><custom-block s="$robot goto %s"><block var="drop pose"/></custom-block><custom-block s="$robot goto %s"><block var="above pose"/></custom-block><custom-block s="$robot goto %s"><block var="grab pose 1"/></custom-block><custom-block s="$robot goto %s"><block var="grab pose 2"/></custom-block><custom-block s="$robot close gripper"></custom-block><custom-block s="$robot goto rest position while holding %b"><block s="reportTrue"></block></custom-block><custom-block s="$robot goto %s"><block var="drop pose"/></custom-block></script><script x="70" y="716.9999999999998"><custom-block s="$robot goto rest position while holding %b"><l/></custom-block><block s="doForever"><script><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><custom-block s="$robot get ball color" scope="Pessac-crane"></custom-block></custom-block><custom-block s="$robot grasp ball"></custom-block><custom-block s="$robot drop ball"></custom-block></script></block></script><script x="31" y="30"><block s="receiveGo"></block><block s="doSetVar"><l>host</l><l>pessac-crane.local</l></block><block s="doSetVar"><l>port</l><l>6969</l></block><block s="doSetVar"><l>rest pose</l><block s="reportNewList"><list><l>0</l><l>-100</l><l>45</l><l>0</l><l>55</l></list></block></block><block s="doSetVar"><l>above pose</l><block s="reportNewList"><list><l>0</l><l>40</l><l>10</l><l>0</l><l>20</l></list></block></block><block s="doSetVar"><l>grab pose 1</l><block s="reportNewList"><list><l>0</l><l>60</l><l>10</l><l>0</l><l>0</l></list></block></block><block s="doSetVar"><l>grab pose 2</l><block s="reportNewList"><list><l>0</l><l>60</l><l>10</l><l>0</l><l>-10</l></list></block></block><block s="doSetVar"><l>drop pose</l><block s="reportNewList"><list><l>-40</l><l>40</l><l>-25</l><l>0</l><l>10</l></list></block></block><block s="doSetVar"><l>hold ball color</l><l>None</l></block><block s="doSetVar"><l>gate</l><block s="reportListItem"><l>1</l><block s="reportGet"><l><option>neighbors</option></l></block></block></block><block s="doSayFor"><custom-block s="$robot test connection"></custom-block><l>2</l></block><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><l>off</l></custom-block><custom-block s="$robot %txt behaviours %txt"><l>start</l><l>color_ball_detection</l></custom-block><custom-block s="$robot set motor(s) %s %txt"><custom-block s="$robot all motors"></custom-block><l>stiff</l></custom-block><custom-block s="$robot goto rest position while holding %b"><l/></custom-block><custom-block s="$robot close gripper"></custom-block><block s="doForever"><script><block s="doWaitUntil"><custom-block s="$robot contact"></custom-block></block><block s="doRun"><custom-block s="ask %s for %repRing"><block var="thymio"/><block s="reifyScript"><script><custom-block s="$turtle %txt follow line"><l>stop</l></custom-block><block s="doReport"><l></l></block></script><list></list></block></custom-block><list></list></block><block s="doBroadcastAndWait"><block s="reportNewList"><list><l>conveyor ready</l><block var="thymio"/><block s="reportGet"><l><option>self</option></l></block></list></block></block><block s="doWait"><l>10</l></block></script></block></script><script x="434" y="34"><block s="receiveMessage"><l><option>any message</option></l></block><block s="doDeclareVariables"><list><l>conveyor</l><l>msg</l></list></block><block s="doSetVar"><l>msg</l><block s="getLastMessage"></block></block><block s="doIf"><block s="reportAnd"><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="msg"/></block><l>conveyor ready</l></block><block s="reportEquals"><block s="reportListItem"><l>3</l><block var="msg"/></block><block s="reportGet"><l><option>self</option></l></block></block></block><script><block s="doSetVar"><l>conveyor</l><block s="reportListItem"><l>2</l><block var="msg"/></block></block><block s="doIfElse"><custom-block s="$robot is holding"></custom-block><script><block s="doIf"><block s="reportEquals"><custom-block s="average %s"><custom-block s="$robot colors seen by %s"><block var="gate"/></custom-block></custom-block><block var="hold ball color"/></block><script><custom-block s="$robot drop ball"></custom-block><block s="doSetVar"><l>hold ball color</l><l>None</l></block><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><l>off</l></custom-block><custom-block s="$robot goto rest position while holding %b"><l/></custom-block><custom-block s="$robot close gripper"></custom-block></script></block></script><script><custom-block s="$robot goto rest position while holding %b"><block s="reportFalse"></block></custom-block><block s="doSetVar"><l>hold ball color</l><custom-block s="$robot get ball color" scope="Pessac-crane"></custom-block></block><custom-block s="$robot set color leds of motor(s) %s in %txt"><l>m1</l><block var="hold ball color"/></custom-block><custom-block s="$robot grasp ball"></custom-block></script></block><block s="doBroadcast"><block s="reportNewList"><list><l>conveyor free</l><block var="conveyor"/></list></block></block></script></block></script></scripts></sprite><watcher scope="sub-crane" var="rest pose" style="normal" x="0.625" y="0.6249999999999929" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="above pose" style="normal" x="0.625" y="1.9375001249999997" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="grab pose 2" style="normal" x="0.625" y="4.562500374999992" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="grab pose 1" style="normal" x="0.625" y="5.875000499999992" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="drop pose" style="normal" x="0.625" y="7.187500624999998" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="host" style="normal" x="1.25" y="1.250000000000007" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="port" style="normal" x="1.25" y="3.8750002500000065" color="243,118,29" hidden="true"/><watcher scope="Conveyor" var="thymio hostname" style="normal" x="1.25" y="6.500000499999992" color="243,118,29" hidden="true"/><watcher scope="Conveyor" var="thymio port" style="normal" x="1.25" y="9.125000749999998" color="243,118,29" hidden="true"/><watcher scope="Conveyor" var="thymio node" style="normal" x="1.25" y="11.750000999999997" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="gate" style="normal" x="1.25" y="14.375001250000011" color="243,118,29" hidden="true"/><watcher scope="sub-gate" var="host" style="normal" x="1.25" y="19.87499975" color="243,118,29" hidden="true"/><watcher scope="sub-gate" var="port" style="normal" x="1.25" y="19.87499975" color="243,118,29" hidden="true"/><watcher scope="sub-gate" var="rest position" style="normal" x="1.25" y="19.87499975" color="243,118,29" hidden="true"/><watcher var="thymio" style="normal" x="1.25" y="19.87499975" color="243,118,29" hidden="true"/><watcher scope="sub-crane" var="hold ball color" style="normal" x="1.25" y="19.87499975" color="243,118,29" hidden="true"/></sprites></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="$robot motors in group %&apos;alias&apos;" type="reporter" category="sensing"><comment x="0" y="0" w="302" collapsed="false">Return a list of motors which are grouped in the input alias</comment><header></header><code></code><inputs><input type="%txt">group_name</input></inputs><script><block s="doDeclareVariables"><list><l>output</l></list></block><block s="doSetVar"><l>output</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/</l><block var="alias"/></list></block></block></block><block s="doIfElse"><block s="reportEquals"><block var="output"/><l></l></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Group &lt; </l><block var="alias"/><l> &gt; is not in the aivaible groups of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><custom-block s="$robot all motors groups"></custom-block></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script><script><block s="doReport"><block s="reportTextSplit"><block var="output"/><l>/</l></block></block></script></block></script></block-definition><block-definition s="$robot all motors" type="reporter" category="sensing"><comment x="0" y="0" w="90" collapsed="false">Return a list of all available motors</comment><header></header><code></code><inputs></inputs><script><block s="doReport"><custom-block s="$robot motors in group %txt"><l>motors</l></custom-block></block></script></block-definition><block-definition s="$robot get all motors positions" type="reporter" category="sensing"><comment x="0" y="0" w="170" collapsed="false">Return a list of all motors present positions, in the order of &quot;$robot all motors&quot; block list.&#xD;&#xD;Usefull for some advanced programs.</comment><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/get/positions</l></list></block></block><l>;</l></block></block></script></block-definition><block-definition s="$robot get %&apos;register&apos; of motor(s) %&apos;motors&apos;" type="reporter" category="sensing"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Get a defined &lt;register&gt; &lt;value&gt; of one motor.&#xD;Example of some registers : torque_limit, angle_limit, present_temperature, present_position...&#xD;For more informations about registers, look at the online documentation : http://$robot-project.github.io/pypot/&#xD;</comment><header></header><code></code><inputs><input type="%s">present_position<options>position=present_position
speed=present_speed
load (force)=present_load
temperature=present_temperature
voltage=present_voltage</options></input><input type="%s">motor_name</input></inputs><script><block s="doDeclareVariables"><list><l>output</l><l>complete motor list</l></list></block><block s="doSetVar"><l>complete motor list</l><custom-block s="$robot all motors"></custom-block></block><block s="doIf"><block s="reportNot"><block s="reportIsA"><block var="motors"/><l><option>list</option></l></block></block><script><block s="doIfElse"><block s="reportOr"><block s="reportIsIdentical"><block var="motors"/><l>all</l></block><block s="reportIsIdentical"><block var="motors"/><l></l></block></block><script><block s="doSetVar"><l>motors</l><custom-block s="$robot all motors"></custom-block></block></script><script><block s="doSetVar"><l>motors</l><block s="reportTextSplit"><block var="motors"/><l><option>whitespace</option></l></block></block></script></block></script></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="motors"/><script><block s="doIf"><block s="reportNot"><block s="reportListContainsItem"><block var="complete motor list"/><block var="m"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Motor &lt; </l><block var="m"/><l> &gt; is not in the available motors of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="complete motor list"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script></block></script></custom-block><block s="doIfElse"><block s="reportEquals"><block s="reportListLength"><block var="motors"/></block><l>1</l></block><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/</l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="#1"/><l>;</l><block var="#2"/></list></block></autolambda><list><l>#1</l><l>#2</l></list></block><block var="motors"/></custom-block><l>/get/</l><block var="register"/></list></block></block></block></script><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/</l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="#1"/><l>;</l><block var="#2"/></list></block></autolambda><list><l>#1</l><l>#2</l></list></block><block var="motors"/></custom-block><l>/get/</l><block var="register"/></list></block></block><l>;</l></block></block></script></block></script></block-definition><block-definition s="$robot index of motor %&apos;motor&apos;" type="reporter" category="sensing"><comment x="0" y="0" w="109" collapsed="false">Return the index of a motor name in the &quot;$robot all motors&quot; block list</comment><header></header><code></code><inputs><input type="%txt">motor_name</input></inputs><script><block s="doDeclareVariables"><list><l>i</l><l>complete motor list</l></list></block><block s="doSetVar"><l>complete motor list</l><custom-block s="$robot all motors"></custom-block></block><block s="doSetVar"><l>i</l><l>1</l></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="complete motor list"/><script><block s="doIf"><block s="reportEquals"><block var="m"/><block var="motor"/></block><script><block s="doReport"><block var="i"/></block></script></block><block s="doChangeVar"><l>i</l><l>1</l></block></script></custom-block><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Motor &lt; </l><block var="motor"/><l>&gt; is not in the aivaible motors of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="complete motor list"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script></block-definition><block-definition s="$robot robot URL" type="reporter" category="sensing"><comment x="0" y="0" w="117" collapsed="false">For internal use only</comment><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportJoinWords"><list><block var="host"/><l>:</l><block var="port"/></list></block></block></script></block-definition><block-definition s="$robot set motor(s) %&apos;motor&apos; %&apos;compliant&apos;" type="command" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Compliance property make motors activly become soft and movable.&#xD;You need to activate the compliance if you want to record a movement by demonstration.&#xD;&#xD;The motor(s) input can accept :&#xD;- string of a motor name&#xD;- string of many motors separed with spaces&#xD;- a Snap! list of motors like the reporter block &quot;$robot all motors&quot;</comment><header></header><code></code><inputs><input type="%s">motor_name</input><input type="%txt" readonly="true">compliant<options>compliant
stiff</options></input></inputs><script><block s="doDeclareVariables"><list><l>comp</l></list></block><block s="doSetVar"><l>comp</l><custom-block s="if %b then %anyUE else %anyUE"><block s="reportOr"><block s="reportEquals"><block var="compliant"/><l>compliant</l></block><block var="compliant"/></block><l>1</l><l>0</l></custom-block></block><custom-block s="$robot set %txt of motor(s) %s to %s"><l>compliant</l><block var="motor"/><block var="comp"/></custom-block></script></block-definition><block-definition s="$robot set position(s) %&apos;position&apos; of motor(s) %&apos;motors&apos; in %&apos;duration&apos; seconds | wait ? %&apos;wait&apos;" type="command" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">set motor to the desired position (angle) in the desired time.&#xD;&#xD;The motor(s) input can accept :&#xD;- string of a motor name&#xD;- string of many motors separed with spaces&#xD;- a Snap! list of motors like the reporter block &quot;$robot all motors&quot;</comment><header></header><code></code><inputs><input type="%n">0</input><input type="%s">motor_name</input><input type="%n">2</input><input type="%boolUE"></input></inputs><script><block s="doDeclareVariables"><list><l>output</l><l>complete motor list</l><l>i</l><l>mot_pos</l><l>querry_URL</l></list></block><block s="doSetVar"><l>mot_pos</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>i</l><l>1</l></block><block s="doSetVar"><l>complete motor list</l><custom-block s="$robot all motors"></custom-block></block><block s="doIf"><block s="reportNot"><block s="reportIsA"><block var="motors"/><l><option>list</option></l></block></block><script><block s="doIfElse"><block s="reportIsIdentical"><block var="motors"/><l></l></block><script><block s="doSetVar"><l>motors</l><custom-block s="$robot all motors"></custom-block></block></script><script><block s="doSetVar"><l>motors</l><block s="reportTextSplit"><block var="motors"/><l><option>whitespace</option></l></block></block></script></block></script></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="motors"/><script><block s="doIfElse"><block s="reportNot"><block s="reportListContainsItem"><block var="complete motor list"/><block var="m"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Motor </l><block var="m"/><l> is not in the aivaible motors of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="complete motor list"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script><script><block s="doIfElse"><block s="reportIsA"><block var="position"/><l><option>list</option></l></block><script><block s="doAddToList"><block s="reportJoinWords"><list><block var="m"/><l>:</l><block s="reportListItem"><block var="i"/><block var="position"/></block></list></block><block var="mot_pos"/></block></script><script><block s="doAddToList"><block s="reportJoinWords"><list><block var="m"/><l>:</l><block var="position"/></list></block><block var="mot_pos"/></block></script></block></script></block><block s="doChangeVar"><l>i</l><l>1</l></block></script></custom-block><block s="doSetVar"><l>querry_URL</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/set/goto/</l><block s="reportJoinWords"><list><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="#1"/><l>:</l><block var="duration"/><l>;</l><block var="#2"/></list></block></autolambda><list><l>#1</l><l>#2</l></list></block><block var="mot_pos"/></custom-block><l>:</l><block var="duration"/></list></block></list></block></block></block><block s="doIfElse"><block s="evaluate"><block var="wait"/><list></list></block><script><block s="doRun"><block s="reifyReporter"><autolambda><block var="querry_URL"/></autolambda><list></list></block><list></list></block><block s="doWait"><block var="duration"/></block></script><script><block s="doReport"><block var="querry_URL"/></block></script></block></script></block-definition><block-definition s="$robot reset %&apos;simulation&apos;" type="command" category="control"><comment x="0" y="0" w="182" collapsed="false">Reset the simulation in V-rep.&#xD;It is usefull if you have connection issues with V-rep.</comment><header></header><code></code><inputs><input type="%s" readonly="true">robot<options>robot
simulation</options></input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="simulation"/><l>robot</l></block><script><block s="fork"><block s="reifyReporter"><autolambda><block s="evaluate"><block s="reifyReporter"><autolambda><block s="reportURL"><block s="reportJoinWords"><list><block var="host"/><l>/services.php?python=restart</l></list></block></block></autolambda><list></list></block><list></list></block></autolambda><list></list></block><list></list></block><block s="fork"><block s="reifyReporter"><autolambda><block s="evaluate"><block s="reifyReporter"><autolambda><block s="reportURL"><block s="reportJoinWords"><list><block var="host"/><l>/reset</l></list></block></block></autolambda><list></list></block><list></list></block></autolambda><list></list></block><list></list></block></script><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/reset-simulation</l></list></block></block></block></script></block></script></block-definition><block-definition s="$robot all recorded moves" type="reporter" category="sensing"><comment x="0" y="0" w="164" collapsed="false">Return a list of all previous records filename.</comment><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MovePlayer</l></list></block></block><l>/</l></block></block></script></block-definition><block-definition s="append %&apos;lists&apos;" type="reporter" category="lists"><comment x="0" y="0" w="287" collapsed="false">Take any number of input lists, and create a new list containing the items of the input lists.  So&#xD;              APPEND [A B] [C D]&#xD;where the [,,,] are lists reports the list&#xD;              [A B C D]&#xD;not [[A B] [C D]].</comment><header></header><code></code><inputs><input type="%mult%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><block s="reportEquals"><block var="lists"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block s="reportListLength"><block var="lists"/></block><l>1</l></block><script><block s="doReport"><block s="reportListItem"><l>1</l><block var="lists"/></block></block></script></block><block s="doIf"><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="lists"/></block><block s="reportNewList"><list></list></block></block><script><block s="doReport"><custom-block s="append %mult%l"><block s="reportCDR"><block var="lists"/></block></custom-block></block></script></block><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block s="reportListItem"><l>1</l><block var="lists"/></block></block><custom-block s="append %mult%l"><block s="reportCONS"><block s="reportCDR"><block s="reportListItem"><l>1</l><block var="lists"/></block></block><block s="reportCDR"><block var="lists"/></block></block></custom-block></block></block></script></block></script></block-definition><block-definition s="reverse %&apos;data&apos;" type="reporter" category="lists"><comment x="0" y="0" w="223" collapsed="false">Reports a new list containing the items of the input list, but in the opposite order.</comment><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>helper</l></list></block><block s="doSetVar"><l>helper</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><block var="input"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="result"/></block></script></block><block s="doReport"><block s="evaluate"><block var="helper"/><list><block s="reportCDR"><block var="input"/></block><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="input"/></block><block var="result"/></block></list></block></block></script><list><l>input</l><l>result</l></list></block></block><block s="doWarp"><script><block s="doReport"><block s="evaluate"><block var="helper"/><list><block var="data"/><block s="reportNewList"><list></list></block></list></block></block></script></block></script></block-definition><block-definition s="remove duplicates from %&apos;data&apos;" type="reporter" category="lists"><comment x="0" y="0" w="209" collapsed="false">Reports a new list whose items are the same as in the input list, except that if two or more equal items appear in the input list, only the last one is kept in the result.</comment><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIfElse"><block s="reportListContainsItem"><block s="reportCDR"><block var="data"/></block><block s="reportListItem"><l>1</l><block var="data"/></block></block><script><block s="doReport"><custom-block s="remove duplicates from %l"><block s="reportCDR"><block var="data"/></block></custom-block></block></script><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="remove duplicates from %l"><block s="reportCDR"><block var="data"/></block></custom-block></block></block></script></block></script></block></script></block-definition><block-definition s="sort %&apos;data&apos; ordering with %&apos;function&apos;" type="reporter" category="lists"><comment x="0" y="0" w="204" collapsed="false">Reports a sorted version of the list in its first input slot, using the comparison function in the second input slot.  For a list of numbers, using &lt; as the comparison function will sort from low to high; using &gt; will sort from high to low.</comment><header></header><code></code><inputs><input type="%l"></input><input type="%predRing"></input></inputs><script><block s="doDeclareVariables"><list><l>even items</l><l>odd items</l><l>merge</l></list></block><block s="doSetVar"><l>odd items</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><l></l><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><l/></block><block s="evaluate"><block var="even items"/><list><block s="reportCDR"><l/></block></list></block></block></block></script><list></list></block></block><block s="doSetVar"><l>even items</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><l></l><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="evaluate"><block var="odd items"/><list><block s="reportCDR"><l/></block></list></block></block></script><list></list></block></block><block s="doSetVar"><l>merge</l><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><block var="#1"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="#2"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="#2"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="#1"/></block></script></block><block s="doIfElse"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="#1"/></block><block s="reportListItem"><l>1</l><block var="#2"/></block></list></block><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="#1"/></block><block s="evaluate"><block var="merge"/><list><block s="reportCDR"><block var="#1"/></block><block var="#2"/></list></block></block></block></script><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="#2"/></block><block s="evaluate"><block var="merge"/><list><block var="#1"/><block s="reportCDR"><block var="#2"/></block></list></block></block></block></script></block></script><list><l>#1</l><l>#2</l></list></block></block><block s="doIf"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block s="reportCDR"><block var="data"/></block><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block var="data"/></block></script></block><block s="doReport"><block s="evaluate"><block var="merge"/><list><custom-block s="sort %l ordering with %predRing"><block s="evaluate"><block var="odd items"/><list><block var="data"/></list></block><block var="function"/></custom-block><custom-block s="sort %l ordering with %predRing"><block s="evaluate"><block var="even items"/><list><block var="data"/></list></block><block var="function"/></custom-block></list></block></block></script></block-definition><block-definition s="$robot set %&apos;register&apos; of motor(s) %&apos;motors&apos; to %&apos;value&apos;" type="command" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Set a defined &lt;value&gt; to a defined &lt;register&gt; of one or many motors.&#xD;Example of some registers : torque_limit, angle_limit, safe_compliant, compliant...&#xD;For more informations about registers, look at the online documentation : http://$robot-project.github.io/pypot/&#xD;&#xD;The motor(s) input can accept :&#xD;- string of a motor name&#xD;- string of many motors separed with spaces&#xD;- a Snap! list of motors like the reporter block &quot;$robot all motors&quot;</comment><header></header><code></code><inputs><input type="%txt"><options>position=goal_position
speed=moving_speed
max torque(%)=torque_limit
compliancy(True or False)=compliant</options></input><input type="%s">motor_name</input><input type="%s">value(s)</input></inputs><script><block s="doDeclareVariables"><list><l>output</l><l>complete motor list</l></list></block><block s="doSetVar"><l>complete motor list</l><custom-block s="$robot all motors"></custom-block></block><block s="doIf"><block s="reportNot"><block s="reportIsA"><block var="motors"/><l><option>list</option></l></block></block><script><block s="doIfElse"><block s="reportIsIdentical"><block var="motors"/><l>all</l></block><script><block s="doSetVar"><l>motors</l><custom-block s="$robot all motors"></custom-block></block></script><script><block s="doSetVar"><l>motors</l><block s="reportTextSplit"><block var="motors"/><l><option>whitespace</option></l></block></block></script></block></script></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="motors"/><script><block s="doIf"><block s="reportNot"><block s="reportListContainsItem"><block var="complete motor list"/><block var="m"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Motor &lt; </l><block var="m"/><l> &gt; is not in the aivaible motors of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="complete motor list"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script></block></script></custom-block><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/set/registers/</l><block s="reportJoinWords"><list><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="#1"/><l>:</l><block var="register"/><l>:</l><block var="value"/><l>;</l><block var="#2"/></list></block></autolambda><list><l>#1</l><l>#2</l></list></block><block var="motors"/></custom-block><l>:</l><block var="register"/><l>:</l><block var="value"/></list></block></list></block></block></block></script></block-definition><block-definition s="$robot get %&apos;running&apos; behaviours" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%s" readonly="true">all<options>all
running</options></input></inputs><script><block s="doIfElse"><block s="reportIsIdentical"><block var="running"/><l>running</l></block><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitives/</l><l>running</l></list></block></block><l>/</l></block></block></script><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitives</l><l></l></list></block></block><l>/</l></block></block></script></block></script></block-definition><block-definition s="$robot play move %&apos;record_name&apos; | speed x %&apos;speed&apos;" type="reporter" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Play the movement of a previous recorded move. &#xD;&#xD;The &lt;record_name&gt; input is the name of a .record filename which should be in the same directory where you started the web server (with the command &quot;$robot-snap $robot-ergo&quot; for example).&#xD;&#xD;You can change the play speed with the &lt;speed&gt; input.</comment><header></header><code></code><inputs><input type="%txt">move_name</input><input type="%n">1</input></inputs><script><block s="doDeclareVariables"><list><l>time</l></list></block><block s="doDeclareVariables"><list><l>wait</l></list></block><block s="doSetVar"><l>wait</l><block s="reportTrue"></block></block><block s="doIfElse"><block s="reportListContainsItem"><custom-block s="$robot all recorded moves"></custom-block><block var="record_name"/></block><script><block s="doSetVar"><l>time</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MovePlayer/</l><block var="record_name"/><l>/start/</l><block var="speed"/></list></block></block></block><block s="doIf"><block var="wait"/><script><block s="doWait"><block var="time"/></block></script><comment w="90" collapsed="false">ugly wait to stop feature.&#xD;TODO : change with a looking at running primitive</comment></block></script><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Error : &lt;</l><block var="record_name"/><l>&gt; is not is the avaible records (look at the block $robot all records to see all recorded moves) </l><custom-block s="$robot all recorded moves"></custom-block></list></block></custom-block></script></block><block s="doReport"><block var="record_name"/></block></script></block-definition><block-definition s="$robot sequence %&apos;mov&apos;" type="reporter" category="control"><header></header><code></code><inputs><input type="%mult%repRing"></input></inputs><script><block s="doDeclareVariables"><list><l>out</l></list></block><block s="doSetVar"><l>out</l><l></l></block><custom-block s="for each %upvar of %l %cs"><l>item</l><block var="mov"/><script><block s="doSetVar"><l>out</l><block s="reportJoinWords"><list><block s="reportCallCC"><block var="item"/></block><l>;</l><block var="out"/></list></block></block></script></custom-block><block s="doReport"><block var="out"/></block></script></block-definition><block-definition s="$robot concurrent %&apos;movements&apos;" type="reporter" category="control"><comment x="0" y="0" w="202" collapsed="false">All reports input are run concurently.&#xD;You can use this block to play concurently many recorded move</comment><header></header><code></code><inputs><input type="%mult%repRing"></input></inputs><script><block s="doDeclareVariables"><list><l>results</l><l>iterator</l></list></block><block s="doSetVar"><l>results</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>iterator</l><l>0</l></block><block s="doRepeat"><block s="reportListLength"><block var="movements"/></block><script><block s="fork"><block s="reifyScript"><script><block s="doAddToList"><block s="reportCallCC"><block s="reportListItem"><block var="iterator"/><block var="movements"/></block></block><block var="results"/></block></script><list></list></block><list></list></block><block s="doChangeVar"><l>iterator</l><l>1</l></block><custom-block s="yield"></custom-block></script></block><block s="doWaitUntil"><block s="reportEquals"><block s="reportListLength"><block var="movements"/></block><block s="reportListLength"><block var="results"/></block></block></block><block s="doReport"><block var="results"/></block></script></block-definition><block-definition s="sum %&apos;nums&apos;" type="reporter" category="operators"><comment x="0" y="0" w="202" collapsed="false">Takes any number of numbers as inputs (use the left and right arrowheads to adjust the number of input slots) and reports the result of adding them all, so&#xD;ISUM (4) (100) (8))&#xD;reports 112.</comment><header></header><code></code><inputs><input type="%mult%n"></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="nums"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><l>0</l></block></script></block><block s="doReport"><block s="reportSum"><block s="reportListItem"><l>1</l><block var="nums"/></block><custom-block s="sum %mult%n"><block s="reportCDR"><block var="nums"/></block></custom-block></block></block></script></block-definition><block-definition s="product %&apos;nums&apos;" type="reporter" category="operators"><comment x="0" y="0" w="205" collapsed="false">Takes any number of numbers as inputs (use the left and right arrowheads to adjust the number of input slots) and reports the result of multiplying them all, so&#xD;(PRODUCT (4) (100) (8))&#xD;reports 3200.</comment><header></header><code></code><inputs><input type="%mult%n"></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="nums"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><l>1</l></block></script></block><block s="doReport"><block s="reportProduct"><block s="reportListItem"><l>1</l><block var="nums"/></block><custom-block s="product %mult%n"><block s="reportCDR"><block var="nums"/></block></custom-block></block></block></script></block-definition><block-definition s="all of %&apos;preds&apos;" type="predicate" category="operators"><comment x="0" y="0" w="247.99999999999997" collapsed="false">Takes any number of Boolean (true/false) inputs (use the left and right arrowheads to adjust the number of input slots) and reports TRUE only if all of the inputs are TRUE, otherwise FALSE.  Like AND but for multiple inputs.</comment><header></header><code></code><inputs><input type="%mult%boolUE"></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="preds"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportTrue"></block></block></script></block><block s="doReport"><block s="reportAnd"><block s="evaluate"><block s="reportListItem"><l>1</l><block var="preds"/></block><list></list></block><custom-block s="all of %mult%boolUE"><block s="reportCDR"><block var="preds"/></block></custom-block></block></block></script></block-definition><block-definition s="any of %&apos;preds&apos;" type="predicate" category="operators"><comment x="0" y="0" w="240" collapsed="false">Takes any number of Boolean (true/false) inputs (use the left and right arrowheads to adjust the number of input slots) and reports TRUE if at least one input is TRUE, otherwise FALSE.</comment><header></header><code></code><inputs><input type="%mult%boolUE"></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="preds"/><block s="reportNewList"><list></list></block></block><script><block s="doReport"><block s="reportFalse"></block></block></script></block><block s="doReport"><block s="reportOr"><block s="evaluate"><block s="reportListItem"><l>1</l><block var="preds"/></block><list></list></block><custom-block s="any of %mult%boolUE"><block s="reportCDR"><block var="preds"/></block></custom-block></block></block></script></block-definition><block-definition s="yield" type="command" category="other"><header></header><code></code><inputs></inputs><script><block s="doWait"><l>0.00000000000001</l></block></script></block-definition><block-definition s="$robot create &amp; start record move %&apos;record_name&apos; with motor(s) %&apos;motors input&apos;" type="command" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Create and start the record of a defininied move..&#xD;&#xD;The &lt;record_name&gt; input is used to store the recorded move. The move is stored in the directory where you started the web server (with the command &quot;$robot-snap $robot-ergo&quot; for example), and can be replayed even if you close Snap! &#xD; &#xD;The motor(s) input can accept :&#xD;- string of a motor name&#xD;- string of many motors separed with spaces&#xD;- a Snap! list of motors like the reporter block &quot;$robot all motors&quot;&#xD;&#xD;If the motor(s) input is empty, all motors will be recorded.</comment><header></header><code></code><inputs><input type="%s">move_name</input><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>motors_list</l><l>complete motor list</l><l>complete aliases list</l></list></block><block s="doSetVar"><l>motors_list</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>complete motor list</l><custom-block s="$robot all motors"></custom-block></block><block s="doIf"><block s="reportIsIdentical"><block var="record_name"/><l></l></block><script><custom-block s="$robot popup %txt"><l>Input error, record name must not be empty</l></custom-block><block s="doReport"><l></l></block></script></block><block s="doIfElse"><block s="reportEquals"><block var="motors input"/><l></l></block><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MoveRecorder/</l><block var="record_name"/><l>/start/</l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="#1"/><l>;</l><block var="#2"/></list></block></autolambda><list><l>#1</l><l>#2</l></list></block><custom-block s="$robot all motors"></custom-block></custom-block></list></block></block></block></script><script><block s="doIfElse"><block s="reportIsA"><block var="motors input"/><l><option>list</option></l></block><script><block s="doSetVar"><l>motors_list</l><custom-block s="append %mult%l"><list><block var="motors_list"/><block var="motors input"/></list></custom-block></block></script><script><block s="doIfElse"><block s="reportOr"><block s="reportIsA"><block var="motors input"/><l><option>number</option></l></block><block s="reportIsA"><block var="motors input"/><l><option>text</option></l></block></block><script><block s="doSetVar"><l>motors_list</l><custom-block s="append %mult%l"><list><block var="motors_list"/><block s="reportTextSplit"><block var="motors input"/><l><option>whitespace</option></l></block></list></custom-block></block></script><script><custom-block s="$robot popup %txt"><l>Input error, you should look at help (right click on the bock)</l></custom-block></script></block></script></block></script></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="motors_list"/><script><block s="doIf"><block s="reportNot"><block s="reportListContainsItem"><block var="complete motor list"/><block var="m"/></block></block><script><block s="doIf"><block s="reportEquals"><block var="complete aliases list"/><l>0</l><comment w="90" collapsed="false">Set all aliases here for optimisation issues</comment></block><script><block s="doSetVar"><l>complete aliases list</l><custom-block s="$robot all motors groups"></custom-block></block></script></block><block s="doIfElse"><block s="reportListContainsItem"><block var="complete aliases list"/><block var="m"/></block><script><block s="doSetVar"><l>motors_list</l><custom-block s="append %mult%l"><list><block var="motors_list"/><custom-block s="$robot motors in group %txt"><block var="m"/></custom-block></list></custom-block></block></script><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Motor </l><block var="m"/><l>does not exist in your robot. </l></list></block></custom-block><block s="doReport"><l></l></block></script></block></script></block></script></custom-block><custom-block s="$robot set motor(s) %s %txt"><block var="motors_list"/><l>compliant</l></custom-block><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MoveRecorder/</l><block var="record_name"/><l>/start/</l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="#1"/><l>;</l><block var="#2"/></list></block></autolambda><list><l>#1</l><l>#2</l></list></block><block var="motors_list"/></custom-block></list></block></block></block></script></block-definition><block-definition s="$robot stop record &amp; save move %&apos;record_name&apos;" type="command" category="control"><comment x="0" y="0" w="489" collapsed="false">Stop recording the desired move record. &#xD;Be careful, you must have previously defined a move record with the &quot;create move ... with motor(s) ...&quot; block</comment><header></header><code></code><inputs><input type="%s">move_name</input></inputs><script><block s="doDeclareVariables"><list><l>motors</l></list></block><block s="doSetVar"><l>motors</l><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MoveRecorder/</l><block var="record_name"/><l>/get_motors</l></list></block></block><l>/</l></block></block><custom-block s="$robot set motor(s) %s %txt"><block var="motors"/><block s="reportFalse"></block></custom-block><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MoveRecorder/</l><block var="record_name"/><l>/stop</l></list></block></block></block></script></block-definition><block-definition s="$robot stop move %&apos;record_name&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s">move_name</input></inputs><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MovePlayer/</l><block var="record_name"/><l>/stop</l></list></block></block></block></script></block-definition><block-definition s="$robot popup %&apos;message&apos;" type="command" category="other"><header></header><code></code><inputs><input type="%txt"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>message</l></list><l>alert(message);</l></block><list><block var="message"/></list></block></script></block-definition><block-definition s="pool map %&apos;function&apos; over %&apos;lists&apos;" type="reporter" category="lists"><comment x="0" y="0" w="204" collapsed="false">Works as the map block (see map help), but it proceeds iterations concurently.</comment><header></header><code></code><inputs><input type="%repRing"></input><input type="%mult%l"></input></inputs><script><block s="doDeclareVariables"><list><l>results</l><l>iterator</l><l>input_list</l><l>list</l></list></block><block s="doSetVar"><l>results</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>iterator</l><l>0</l></block><block s="doRepeat"><block s="reportListLength"><block s="reportListItem"><l>1</l><block var="lists"/></block></block><script><block s="doChangeVar"><l>iterator</l><l>1</l></block><block s="doSetVar"><l>input_list</l><block s="reportNewList"><list></list></block></block><custom-block s="for each %upvar of %l %cs"><l>list</l><block var="lists"/><script><block s="doAddToList"><block s="reportListItem"><block var="iterator"/><block var="list"/></block><block var="input_list"/></block></script></custom-block><block s="fork"><block s="reifyScript"><script><block s="doAddToList"><block s="evaluate"><block var="function"/><block var="input_list"/></block><block var="results"/></block></script><list></list></block><list></list></block><custom-block s="yield"></custom-block></script></block><block s="doWaitUntil"><block s="reportEquals"><block s="reportListLength"><block var="results"/></block><block s="reportListLength"><block s="reportListItem"><l>1</l><block var="lists"/></block></block></block></block><block s="doReport"><block var="results"/></block></script></block-definition><block-definition s="$robot play concurently moves %&apos;inputs&apos;" type="reporter" category="control"><comment x="0" y="0" w="260" collapsed="false">Play previous recorded move concurently. Inputs can be : &#xD;* move name (string)&#xD;* many moves name separated by whitespace&#xD;*  any reporter block, like sequential or play sequentialy</comment><header></header><code></code><inputs><input type="%mult%s"></input></inputs><script><block s="doDeclareVariables"><list><l>move_names</l><l>reporters</l><l>tmp_string</l><l>tmp_reporter</l></list></block><block s="doSetVar"><l>move_names</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>tmp_string</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>reporters</l><block s="reportNewList"><list></list></block></block><custom-block s="for each %upvar of %l %cs"><l>item</l><block var="inputs"/><script><block s="doIfElse"><block s="reportOr"><block s="reportIsA"><block var="item"/><l><option>text</option></l></block><block s="reportIsA"><block var="item"/><l><option>number</option></l></block></block><script><block s="doSetVar"><l>move_names</l><custom-block s="append %mult%l"><list><block var="move_names"/><block s="reportTextSplit"><block var="item"/><l>;</l></block></list></custom-block></block></script><script><block s="doIfElse"><block s="reportIsA"><block var="item"/><l><option>list</option></l></block><script><block s="doSetVar"><l>move_names</l><custom-block s="append %mult%l"><list><block var="move_names"/><block var="item"/></list></custom-block></block></script><script><block s="doIfElse"><block s="reportIsA"><block var="item"/><l><option>reporter</option></l></block><script><block s="doAddToList"><block var="item"/><block var="reporters"/></block></script><script><custom-block s="$robot popup %txt"><l>Input is not valid. See help (right click on the block)</l></custom-block></script></block></script></block></script></block></script></custom-block><custom-block s="for each %upvar of %l %cs"><l>item</l><block var="move_names"/><script><block s="fork"><block s="reifyScript"><script><block s="doAddToList"><block s="evaluate"><block s="reifyReporter"><autolambda><custom-block s="$robot play move %txt | speed x %n"><l></l><l>1</l></custom-block></autolambda><list></list></block><list><block var="item"/></list></block><block var="tmp_string"/></block></script><list></list></block><list></list></block><custom-block s="yield"></custom-block></script></custom-block><block s="doSetVar"><l>tmp_reporter</l><custom-block s="$robot concurrent %mult%repRing"><list><block s="reifyReporter"><script></script><list></list></block></list></custom-block></block><block s="doWaitUntil"><block s="reportEquals"><block s="reportListLength"><block var="tmp_string"/></block><block s="reportListLength"><block var="move_names"/></block></block></block><block s="doReport"><custom-block s="append %mult%l"><list><block var="tmp_reporter"/><block var="tmp_string"/></list></custom-block></block></script><scripts><comment x="131" y="660.2" w="265" collapsed="false">TODO : understand why a sequential input blocks return items on a list rather than separated with whitespace</comment></scripts></block-definition><block-definition s="$robot play sequentially moves %&apos;inputs&apos;" type="reporter" category="control"><comment x="0" y="0" w="267" collapsed="false">Play previous recorded moves sequentialy. Inputs can be : &#xD;* move name (string)&#xD;* many moves name separated by whitespace&#xD;* any reporter block like concurent or play concurently</comment><header></header><code></code><inputs><input type="%mult%s"></input></inputs><script><block s="doDeclareVariables"><list><l>move_names</l><l>reporters</l><l>out</l></list></block><block s="doSetVar"><l>move_names</l><block s="reportNewList"><list></list></block></block><block s="doSetVar"><l>reporters</l><block s="reportNewList"><list></list></block></block><custom-block s="for each %upvar of %l %cs"><l>item</l><block var="inputs"/><script><block s="doIfElse"><block s="reportOr"><block s="reportIsA"><block var="item"/><l><option>text</option></l></block><block s="reportIsA"><block var="item"/><l><option>number</option></l></block></block><script><block s="doSetVar"><l>move_names</l><custom-block s="append %mult%l"><list><block var="move_names"/><block s="reportTextSplit"><block var="item"/><l>;</l></block></list></custom-block></block></script><script><block s="doIfElse"><block s="reportIsA"><block var="item"/><l><option>list</option></l></block><script><block s="doSetVar"><l>move_names</l><custom-block s="append %mult%l"><list><block var="move_names"/><block var="item"/></list></custom-block></block></script><script><block s="doIfElse"><block s="reportIsA"><block var="item"/><l><option>reporter</option></l></block><script><block s="doAddToList"><block var="item"/><block var="reporters"/></block></script><script><custom-block s="$robot popup %txt"><l>Input is not valid. See help (right click on the block)</l></custom-block></script></block></script></block></script></block></script></custom-block><block s="doReport"><custom-block s="join words %mult%txt"><list><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><custom-block s="$robot play move %txt | speed x %n"><l></l><l>1</l></custom-block></autolambda><list></list></block><list><block var="move_names"/></list></custom-block></custom-block><custom-block s="$robot sequence %mult%repRing"><list><block s="reifyReporter"><script></script><list></list></block></list></custom-block></list></custom-block></block></script></block-definition><block-definition s="$robot all motors groups" type="reporter" category="sensing"><comment x="0" y="0" w="171" collapsed="false">Return a list of all aliases.&#xD;Alias is a keyword for representing many motors at once. </comment><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motors/</l><l>alias</l></list></block></block><l>/</l></block></block></script></block-definition><block-definition s="items %&apos;i&apos; to %&apos;j&apos; of %&apos;list&apos;" type="reporter" category="lists"><comment x="0" y="0" w="146" collapsed="false">Return a sublist which contains items in the interval of 2 input numbers.&#xD;Original list is not modified.</comment><header></header><code></code><inputs><input type="%n"></input><input type="%n"></input><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>result</l></list></block><block s="doSetVar"><l>result</l><block s="reportNewList"><list></list></block></block><block s="doIf"><block s="reportLessThan"><block var="i"/><l>0</l></block><script><block s="doSetVar"><l>i</l><block s="reportSum"><block s="reportListLength"><block var="list"/></block><block var="i"/></block></block></script></block><block s="doIf"><block s="reportLessThan"><block var="j"/><l>0</l></block><script><block s="doSetVar"><l>j</l><block s="reportSum"><block s="reportListLength"><block var="list"/></block><block var="j"/></block></block></script></block><custom-block s="for %upvar = %n to %n %cs"><l>elem</l><custom-block s="if %b then %anyUE else %anyUE"><block var="i"/><block var="i"/><l>1</l></custom-block><custom-block s="if %b then %anyUE else %anyUE"><block var="j"/><block var="j"/><block s="reportListLength"><block var="list"/></block></custom-block><script><block s="doAddToList"><block s="reportListItem"><block var="elem"/><block var="list"/></block><block var="result"/></block></script></custom-block><block s="doReport"><block var="result"/></block></script></block-definition><block-definition s="$robot play move %&apos;record_name&apos; in reverse | speed x %&apos;speed&apos;" type="reporter" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Play in reverse the movement of a previous recorded move. &#xD;&#xD;The &lt;record_name&gt; input is the name of a .record filename which should be in the same directory where you started the web server (with the command &quot;$robot-snap $robot-ergo&quot; for example).&#xD;&#xD;You can change the play speed with the &lt;speed&gt; input.</comment><header></header><code></code><inputs><input type="%s">move_name</input><input type="%n">1</input></inputs><script><block s="doDeclareVariables"><list><l>time</l></list></block><block s="doDeclareVariables"><list><l>wait</l></list></block><block s="doSetVar"><l>wait</l><block s="reportTrue"></block></block><block s="doIfElse"><block s="reportListContainsItem"><custom-block s="$robot all recorded moves"></custom-block><block var="record_name"/></block><script><block s="doSetVar"><l>time</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MovePlayer/</l><block var="record_name"/><l>/start/</l><block var="speed"/><l>/backwards</l></list></block></block></block><block s="doIf"><block var="wait"/><script><block s="doWait"><block var="time"/></block></script><comment w="90" collapsed="false">ugly wait to stop feature.&#xD;TODO : change with a looking at running primitive</comment></block></script><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Error : &lt;</l><block var="record_name"/><l>&gt; is not is the avaible records (look at the block $robot all records to see all recorded moves) </l><custom-block s="$robot all recorded moves"></custom-block></list></block></custom-block></script></block><block s="doReport"><block var="record_name"/></block></script></block-definition><block-definition s="$robot test connection" type="reporter" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doIfElse"><custom-block s="ping http:// %s"><custom-block s="$robot robot URL"></custom-block></custom-block><script><block s="doReport"><l>Connection ok!</l></block></script><script><block s="doReport"><l>You may have connection troubles. Check the host variable</l></block></script></block></script></block-definition><block-definition s="index of %&apos;var&apos; in %&apos;list&apos;" type="reporter" category="lists"><comment x="0" y="0" w="194" collapsed="false">Return the index of a item in a list</comment><header></header><code></code><inputs><input type="%s"></input><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>i</l></list></block><block s="doSetVar"><l>i</l><l>1</l></block><custom-block s="for each %upvar of %l %cs"><l>m</l><block var="list"/><script><block s="doIf"><block s="reportEquals"><block var="m"/><block var="var"/></block><script><block s="doReport"><block var="i"/></block></script></block><block s="doChangeVar"><l>i</l><l>1</l></block></script></custom-block><block s="doReport"><l>0</l></block></script></block-definition><block-definition s="$robot http:// %&apos;input&apos;" type="reporter" category="other"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>output</l><l>timer_init</l></list></block><block s="doSetVar"><l>timer_init</l><block s="getTimer"></block></block><block s="doSetVar"><l>output</l><block s="reportNewList"><list></list></block></block><block s="fork"><block s="reifyScript"><script><block s="doAddToList"><block s="reportURL"><block var="input"/></block><block var="output"/></block></script><list></list></block><list></list></block><block s="doWaitUntil"><block s="reportOr"><block s="reportGreaterThan"><block s="reportDifference"><block s="getTimer"></block><block var="timer_init"/></block><l>3.5</l></block><block s="reportGreaterThan"><block s="reportListLength"><block var="output"/></block><l>0</l></block></block></block><block s="doIf"><block s="reportGreaterThan"><block s="reportDifference"><block s="getTimer"></block><block var="timer_init"/></block><l>3</l></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Robot is not connected to </l><block var="input"/></list></block></custom-block><block s="doReport"><l>error</l></block></script></block><block s="doReport"><block s="reportListItem"><l>1</l><block var="output"/></block></block></script><scripts><script x="452.9853535625002" y="75.0000070000001"><custom-block s="$robot all motors"></custom-block></script><script x="539.8916025624999" y="95.00000100000011"><block s="reportURL"><block var="input"/></block></script><script x="397.2265645" y="240.00000399999993"><block s="doSetVar"><l>output</l><l>0</l></block></script><script x="433" y="179.2"><block s="reportListLength"><l/></block></script><script x="701.5517588124999" y="139.00000500000004"><block s="reportStringSize"><l>world</l></block></script></scripts></block-definition><block-definition s="$robot %&apos;action&apos; behaviours %&apos;primitive&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%txt" readonly="true">start<options>start
stop
pause
resume</options></input><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>all primitives</l><l>keyword list</l></list></block><block s="doSetVar"><l>all primitives</l><custom-block s="$robot get %s behaviours"><l>all</l></custom-block></block><block s="doSetVar"><l>keyword list</l><block s="reportNewList"><list><l>start</l><l>stop</l><l>pause</l><l>resume</l></list></block></block><block s="doIfElse"><block s="reportNot"><block s="reportListContainsItem"><block var="all primitives"/><block var="primitive"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Primitive &lt; </l><block var="primitive"/><l> &gt; is not in the aivaible primitives of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="all primitives"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script><script><block s="doIfElse"><block s="reportNot"><block s="reportListContainsItem"><block var="keyword list"/><block var="action"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Action &lt; </l><block var="action"/><l> &gt; is not valid :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="keyword list"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/</l><block var="primitive"/><l>/</l><block var="action"/></list></block></block></block></script></block></script></block></script></block-definition><block-definition s="$robot get %&apos;input&apos; of behaviour %&apos;primitive&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%s" readonly="true">methodes<options>methodes
properties</options></input><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>all primitives</l><l>keyword list</l></list></block><block s="doSetVar"><l>all primitives</l><custom-block s="$robot get %s behaviours"><l>all</l></custom-block></block><block s="doSetVar"><l>keyword list</l><block s="reportNewList"><list><l>properties</l><l>methodes</l></list></block></block><block s="doIfElse"><block s="reportNot"><block s="reportListContainsItem"><block var="all primitives"/><block var="primitive"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Primitive </l><block var="primitive"/><l> is not in the aivaible primitives of your robot :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="all primitives"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script><script><block s="doIfElse"><block s="reportNot"><block s="reportListContainsItem"><block var="keyword list"/><block var="input"/></block></block><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Input </l><block var="input"/><l> is not valid :  </l><custom-block s="combine with %repRing items of %l"><block s="reifyReporter"><autolambda><custom-block s="join words %mult%txt"><list><l></l><l></l></list></custom-block></autolambda><list></list></block><block var="keyword list"/></custom-block></list></block></custom-block><block s="doReport"><l></l></block></script><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/</l><block var="primitive"/><l>/</l><block var="input"/></list></block></block><l>/</l></block></block></script></block></script></block></script></block-definition><block-definition s="set $robot host to %&apos;hostname&apos;" type="command" category="variables"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doSetVar"><l>host</l><block var="hostname"/></block><block s="doDeclareVariables"><list><l>tmp_hostname</l></list></block><block s="doResetTimer"></block><block s="doUntil"><block s="reportGreaterThan"><block s="getTimer"></block><l>10</l></block><script><block s="doSetVar"><l>tmp_hostname</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/ip/</l></list></block></block></block><block s="doIf"><block s="reportGreaterThan"><block s="reportStringSize"><block var="tmp_hostname"/></block><l>1</l></block><script><block s="doSetVar"><l>host</l><block var="tmp_hostname"/></block><block s="bubble"><custom-block s="$robot test connection"></custom-block></block><block s="doReport"><l></l></block></script></block><block s="doWait"><l>0.1</l></block></script></block><custom-block s="$robot popup %txt"><l>Your robot host is unreacheble</l></custom-block></script></block-definition><block-definition s="ping http:// %&apos;url&apos;" type="predicate" category="operators"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doResetTimer"></block><block s="doWaitUntil"><block s="reportOr"><block s="reportGreaterThan"><block s="getTimer"></block><l>5</l></block><block s="reportGreaterThan"><block s="reportStringSize"><block s="reportURL"><block var="url"/></block></block><l>1</l></block></block></block><block s="doIfElse"><block s="reportLessThan"><block s="getTimer"></block><l>5</l></block><script><block s="doReport"><block s="reportTrue"></block></block></script><script><block s="doReport"><block s="reportFalse"></block></block></script></block></script></block-definition><block-definition s="play move %&apos;record_name&apos; | speed x %&apos;speed&apos;" type="command" category="control"><comment x="0" y="0" w="230.00000099999988" collapsed="false">Play the movement of a previous recorded move. &#xD;&#xD;The &lt;record_name&gt; input is the name of a .record filename which should be in the same directory where you started the web server (with the command &quot;$robot-snap $robot-ergo&quot; for example).&#xD;&#xD;You can change the play speed with the &lt;speed&gt; input.</comment><header></header><code></code><inputs><input type="%txt">move_name</input><input type="%n">1</input></inputs><script><block s="doDeclareVariables"><list><l>time</l></list></block><block s="doDeclareVariables"><list><l>wait</l></list></block><block s="doSetVar"><l>wait</l><block s="reportTrue"></block></block><block s="doIfElse"><block s="reportListContainsItem"><custom-block s="$robot all recorded moves"></custom-block><block var="record_name"/></block><script><block s="doSetVar"><l>time</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/MovePlayer/</l><block var="record_name"/><l>/start/</l><block var="speed"/></list></block></block></block><block s="doIf"><block var="wait"/><script><block s="doWait"><block var="time"/></block></script><comment w="90" collapsed="false">ugly wait to stop feature.&#xD;TODO : change with a looking at running primitive</comment></block></script><script><custom-block s="$robot popup %txt"><block s="reportJoinWords"><list><l>Error : &lt;</l><block var="record_name"/><l>&gt; is not is the avaible records (look at the block $robot all records to see all recorded moves) </l><custom-block s="$robot all recorded moves"></custom-block></list></block></custom-block></script></block><block s="doReport"><block var="record_name"/></block></script></block-definition><block-definition s="$robot set color leds of motor(s) %&apos;motor_name&apos; in %&apos;color&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s">motor_name</input><input type="%txt">off<options>off
red
green
yellow
blue
pink
cyan
white</options></input></inputs><script><custom-block s="$robot set %txt of motor(s) %s to %s"><l>led</l><block var="motor_name"/><block var="color"/></custom-block></script></block-definition><block-definition s="$robot card %&apos;card&apos; is detected ?" type="predicate" category="sensing"><header></header><code></code><inputs><input type="%txt">caribou<options>caribou
tetris
lapin</options></input></inputs><script><block s="doDeclareVariables"><list><l>output</l></list></block><block s="doSetVar"><l>output</l><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/detect/</l><block var="card"/></list></block></block></block><block s="doIfElse"><block s="reportEquals"><block var="output"/><l>True</l></block><script><block s="doReport"><block s="reportTrue"></block></block></script><script><block s="doReport"><block s="reportFalse"></block></block></script></block></script></block-definition><block-definition s="$turtle thymio URL of node %&apos;node&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>output</l></list></block><block s="doSetVar"><l>output</l><block s="reportJoinWords"><list><block var="thymio hostname"/><l>:</l><block var="thymio port"/><l>/nodes/</l><block var="node"/></list></block></block><block s="doIf"><block s="reportNot"><block s="reportEquals"><block s="reportListItem"><l><option>last</option></l><block s="reportTextSplit"><block var="output"/><l><option>letter</option></l></block></block><l>/</l></block></block><script><block s="doSetVar"><l>output</l><block s="reportJoinWords"><list><block var="output"/><l>/</l></list></block></block></script></block><block s="doReport"><block var="output"/></block></script></block-definition><block-definition s="$turtle init Thymio host %&apos;host&apos; port %&apos;port&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%txt">localhost</input><input type="%n">3000</input></inputs><script><block s="doSetVar"><l>thymio hostname</l><block var="host"/></block><block s="doSetVar"><l>thymio port</l><block var="port"/></block><block s="doSetVar"><l>thymio node</l><block s="reportListItem"><l>2</l><custom-block s="$turtle get nodes"></custom-block></block></block></script></block-definition><block-definition s="$turtle get all variables name of node %&apos;node&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%txt">thymio-II</input></inputs><script><custom-block s="for each %upvar of %l %cs"><l>item</l><block s="errorObsolete"></block><script><block s="doIf"><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="item"/></block><l>namedVariables</l></block><script><block s="doReport"><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><block s="reportListItem"><l>1</l><l/></block></autolambda><list></list></block><list><block s="reportListItem"><l>2</l><block var="item"/></block></list></custom-block></block></script></block></script></custom-block><block s="doReport"><l></l></block></script></block-definition><block-definition s="$turtle set %&apos;direction&apos; motor speed %&apos;speed&apos;" type="command" category="sensing"><header></header><code></code><inputs><input type="%txt">left<options>left
right</options></input><input type="%s"></input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="direction"/><l>left</l></block><script><custom-block s="$turtle set register %s of thymio %txt value %s"><l>motor.left.target</l><block var="thymio node"/><block var="speed"/></custom-block></script><script><custom-block s="$turtle set register %s of thymio %txt value %s"><l>motor.right.target</l><block var="thymio node"/><block var="speed"/></custom-block></script></block></script></block-definition><block-definition s="$turtle get register %&apos;register&apos; of thymio %&apos;thymio&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%s"></input><input type="%txt">thymio-II</input></inputs><script><block s="doReport"><block s="errorObsolete"></block></block></script></block-definition><block-definition s="$turtle set register %&apos;register&apos; of thymio %&apos;thymio&apos; value %&apos;values&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s"></input><input type="%txt">thymio-II</input><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>values str</l></list></block><block s="doSetVar"><l>values str</l><l></l></block><block s="doIfElse"><block s="reportIsA"><block var="values"/><l><option>list</option></l></block><script><custom-block s="for each %upvar of %l %cs"><l>v</l><block var="values"/><script><block s="doSetVar"><l>values str</l><block s="reportJoinWords"><list><block var="values str"/><l>/</l><block var="v"/></list></block></block></script></custom-block></script><script><block s="doSetVar"><l>values str</l><block var="values"/></block></script></block><block s="fork"><block s="reifyReporter"><autolambda><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$turtle thymio URL of node %txt"><block var="thymio"/></custom-block><block var="register"/><l>/</l><block var="values str"/></list></block></block></autolambda><list></list></block><list></list></block></script></block-definition><block-definition s="$turtle distance %&apos;dir&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%s">ground<options>ground
front
back</options></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="dir"/><l>ground</l></block><script><block s="doReport"><custom-block s="$turtle get register %s of thymio %txt"><l>prox.ground.reflected</l><block var="thymio node"/></custom-block></block></script></block><block s="doIf"><block s="reportEquals"><block var="dir"/><l>front</l></block><script><block s="doReport"><custom-block s="items %n to %n of %l"><l>1</l><l>5</l><custom-block s="$turtle get register %s of thymio %txt"><l>prox.horizontal</l><block var="thymio node"/></custom-block></custom-block></block></script></block><block s="doIf"><block s="reportEquals"><block var="dir"/><l>back</l></block><script><block s="doReport"><custom-block s="items %n to %n of %l"><l>6</l><l>7</l><custom-block s="$turtle get register %s of thymio %txt"><l>prox.horizontal</l><block var="thymio node"/></custom-block></custom-block></block></script></block></script></block-definition><block-definition s="$turtle move %&apos;distance&apos; mm" type="command" category="sensing"><header></header><code></code><inputs><input type="%s">50</input></inputs><script><block s="doDeclareVariables"><list><l>speed</l></list></block><block s="doSetVar"><l>speed</l><custom-block s="if %b then %anyUE else %anyUE"><block s="reportGreaterThan"><block var="distance"/><l>0</l></block><l>100</l><l>-100</l></custom-block></block><custom-block s="$turtle set %txt motor speed %s"><l>left</l><block var="speed"/></custom-block><custom-block s="$turtle set %txt motor speed %s"><l>right</l><block var="speed"/></custom-block><block s="doWait"><block s="reportProduct"><block s="reportMonadic"><l><option>abs</option></l><block var="distance"/></block><l>0.02</l></block></block><custom-block s="$turtle set %txt motor speed %s"><l>left</l><l>0</l></custom-block><custom-block s="$turtle set %txt motor speed %s"><l>right</l><l>0</l></custom-block></script><scripts><script x="70.218752" y="275.000004"><custom-block s="$turtle set %txt motor speed %s"><l>right</l><l>0</l></custom-block></script></scripts></block-definition><block-definition s="$turtle stop motors" type="command" category="sensing"><header></header><code></code><inputs></inputs><script><custom-block s="$turtle set %txt motor speed %s"><l>left</l><l>0</l></custom-block><custom-block s="$turtle set %txt motor speed %s"><l>right</l><l>0</l></custom-block></script></block-definition><block-definition s="$turtle leds set color red %&apos;r&apos; green %&apos;g&apos; blue %&apos;b&apos;" type="command" category="sensing"><header></header><code></code><inputs><input type="%s"></input><input type="%s"></input><input type="%s"></input></inputs><script><custom-block s="$turtle set register %s of thymio %txt value %s"><l>V_leds_top</l><block var="thymio node"/><block s="reportNewList"><list><block var="r"/><block var="g"/><block var="b"/></list></block></custom-block></script></block-definition><block-definition s="$turtle %&apos;state&apos; follow line" type="command" category="sensing"><header></header><code></code><inputs><input type="%txt">start<options>start
stop</options></input></inputs><script><custom-block s="$turtle set register %s of thymio %txt value %s"><l>follow_line_state</l><block var="thymio node"/><custom-block s="if %b then %anyUE else %anyUE"><block s="reportEquals"><block var="state"/><l>start</l></block><l>1</l><l>0</l></custom-block></custom-block><custom-block s="$turtle set register %s of thymio %txt value %s"><l>follow_line_state_changed</l><block var="thymio node"/><l>1</l></custom-block></script><scripts><script x="31" y="172.2"><custom-block s="$turtle set register %s of thymio %txt value %s"><l>follow_line_state_changed</l><block var="thymio node"/><l>1</l></custom-block></script></scripts></block-definition><block-definition s="$robot goto rest position while holding %&apos;something&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%b"></input></inputs><script><block s="doIf"><block s="reportNot"><block var="something"/></block><script><custom-block s="$robot open gripper"></custom-block></script></block><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><block var="rest pose"/><custom-block s="$robot all motors"></custom-block><l>1</l><l/></custom-block><block s="doWait"><l>1</l></block></script></block-definition><block-definition s="$robot open gripper" type="command" category="control"><header></header><code></code><inputs></inputs><script><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><l>50</l><l>m6</l><l>1</l><l/></custom-block></script></block-definition><block-definition s="$robot close gripper" type="command" category="control"><header></header><code></code><inputs></inputs><script><custom-block s="$robot set %txt of motor(s) %s to %s"><l>torque_limit</l><l>m6</l><l>50</l></custom-block><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><l>-20</l><l>m6</l><l>1</l><l/></custom-block><block s="doWait"><l>1</l></block><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><custom-block s="$robot get %s of motor(s) %s"><l>present_position</l><l>m6</l></custom-block><l>m6</l><l>0.1</l><block s="reportTrue"></block></custom-block></script></block-definition><block-definition s="$robot grasp ball" type="command" category="control"><header></header><code></code><inputs></inputs><script><custom-block s="$robot goto %s"><block var="rest pose"/></custom-block><block s="doUntil"><custom-block s="$robot is holding"></custom-block><script><custom-block s="$robot open gripper"></custom-block><custom-block s="$robot goto %s"><block var="above pose"/></custom-block><custom-block s="$robot goto %s"><block var="grab pose 1"/></custom-block><custom-block s="$robot goto %s"><block var="grab pose 2"/></custom-block><block s="doWait"><l>1</l></block><custom-block s="$robot close gripper"></custom-block><block s="doWait"><l>2</l></block><custom-block s="$robot goto rest position while holding %b"><block s="reportTrue"></block></custom-block></script></block></script></block-definition><block-definition s="$robot is holding" type="predicate" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doIf"><block s="reportAnd"><block s="reportLessThan"><block s="reportMonadic"><l><option>abs</option></l><custom-block s="$robot get %s of motor(s) %s"><l>present_position</l><l>m6</l></custom-block></block><l>10</l></block><block s="reportGreaterThan"><custom-block s="$robot get %s of motor(s) %s"><l>present_load</l><l>m6</l></custom-block><l>0</l></block></block><script><custom-block s="$robot close gripper"></custom-block><block s="doReport"><block s="reportAnd"><block s="reportLessThan"><block s="reportMonadic"><l><option>abs</option></l><custom-block s="$robot get %s of motor(s) %s"><l>present_position</l><l>m6</l></custom-block></block><l>10</l></block><block s="reportGreaterThan"><custom-block s="$robot get %s of motor(s) %s"><l>present_load</l><l>m6</l></custom-block><l>0</l></block></block></block></script></block><block s="doReport"><block s="reportFalse"></block></block></script></block-definition><block-definition s="$robot goto %&apos;pos&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s"></input></inputs><script><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><block var="pos"/><custom-block s="$robot all motors"></custom-block><l>1</l><l/></custom-block><block s="doWait"><l>1</l></block></script></block-definition><block-definition s="$robot drop ball" type="command" category="control"><header></header><code></code><inputs></inputs><script><custom-block s="$robot set position(s) %n of motor(s) %s in %n seconds | wait ? %boolUE"><block var="drop pose"/><custom-block s="$robot all motors"></custom-block><l>2</l><l/></custom-block><block s="doWait"><l>3</l></block><custom-block s="$robot open gripper"></custom-block><block s="doWait"><l>1</l></block></script></block-definition><block-definition s="label %&apos;text&apos; of size %&apos;size&apos;" type="command" category="pen"><comment x="0" y="0" w="90" collapsed="false">LABEL will stamp text on the stage at the given font size. The direction of the text is the direction the sprite is facing, and color will match the pen color.</comment><header></header><code></code><inputs><input type="%txt">Hello!</input><input type="%n">12</input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>text</l><l>size</l></list><l>var stage = this.parentThatIsA(StageMorph),&#xD;    context = stage.penTrails().getContext(&apos;2d&apos;),&#xD;    rotation = radians(this.direction() - 90),&#xD;    trans = new Point(&#xD;      this.center().x - stage.left(),&#xD;      this.center().y - stage.top()&#xD;    ),&#xD;    isWarped = this.Warped,&#xD;    len,&#xD;    pos;&#xD;&#xD;if (isWarped) {endWarp(); }&#xD;context.save();&#xD;context.font = size + &apos;px monospace&apos;;&#xD;context.textAlign = &apos;left&apos;;&#xD;context.textBaseline = &apos;alphabetic&apos;;&#xD;context.fillStyle = this.color.toString();&#xD;len = context.measureText(text).width;&#xD;trans = trans.multiplyBy(1 / stage.scale);&#xD;context.translate(trans.x, trans.y);&#xD;context.rotate(rotation);&#xD;context.fillText(text, 0, 0);&#xD;context.translate(-trans.x, -trans.y);&#xD;context.restore();&#xD;pos = new Point(&#xD;  len * Math.sin(radians(this.direction())),&#xD;  len * Math.cos(radians(this.direction())));&#xD;pos = pos.add(new Point(this.xPosition(), this.yPosition()));&#xD;this.gotoXY(pos.x, pos.y, false);&#xD;this.changed();&#xD;if (isWarped) {this.startWarp(); }&#xD;stage.changed();</l></block><list><block var="text"/><block var="size"/></list></block></script></block-definition><block-definition s="map %&apos;function&apos; over %&apos;lists&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%repRing"></input><input type="%mult%l"></input></inputs><script><block s="doWarp"><script><block s="doDeclareVariables"><list><l>mapone</l><l>mapmany</l></list></block><block s="doSetVar"><l>mapone</l><block s="reifyScript"><script><block s="doIf"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><block s="evaluate"><block var="mapone"/><list><block s="reportCDR"><block var="data"/></block></list></block></block></block></script><list><l>data</l></list></block></block><block s="doSetVar"><l>mapmany</l><block s="reifyScript"><script><block s="doIf"><custom-block s="empty? %l"><block s="reportListItem"><l>1</l><block var="data lists"/></block></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="function"/><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><block s="reportListItem"><l>1</l><l/></block></autolambda><list></list></block><list><block var="data lists"/></list></custom-block></block><block s="evaluate"><block var="mapmany"/><list><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><block s="reportCDR"><l/></block></autolambda><list></list></block><list><block var="data lists"/></list></custom-block></list></block></block></block></script><list><l>data lists</l></list></block></block><block s="doIfElse"><custom-block s="empty? %l"><block s="reportCDR"><block var="lists"/></block></custom-block><script><block s="doReport"><block s="evaluate"><block var="mapone"/><list><block s="reportListItem"><l>1</l><block var="lists"/></block></list></block></block></script><script><block s="doReport"><block s="evaluate"><block var="mapmany"/><list><block var="lists"/></list></block></block></script></block></script></block></script></block-definition><block-definition s="empty? %&apos;data&apos;" type="predicate" category="lists"><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block></block></script></block-definition><block-definition s="keep items such that %&apos;pred&apos; from %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%predRing"></input><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIfElse"><block s="evaluate"><block var="pred"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><script><block s="doReport"><block s="reportCONS"><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="keep items such that %predRing from %l"><block var="pred"/><block s="reportCDR"><block var="data"/></block></custom-block></block></block></script><script><block s="doReport"><custom-block s="keep items such that %predRing from %l"><block var="pred"/><block s="reportCDR"><block var="data"/></block></custom-block></block></script></block></script></block></script></block-definition><block-definition s="combine with %&apos;function&apos; items of %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><inputs><input type="%repRing"></input><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><custom-block s="empty? %l"><block s="reportCDR"><block var="data"/></block></custom-block><script><block s="doReport"><block s="reportListItem"><l>1</l><block var="data"/></block></block></script></block><block s="doReport"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="combine with %repRing items of %l"><block var="function"/><block s="reportCDR"><block var="data"/></block></custom-block></list></block></block></script></block></script></block-definition><block-definition s="if %&apos;test&apos; then %&apos;true&apos; else %&apos;false&apos;" type="reporter" category="control"><header></header><code></code><inputs><input type="%b"></input><input type="%anyUE"></input><input type="%anyUE"></input></inputs><script><block s="doIfElse"><block var="test"/><script><block s="doReport"><block s="evaluate"><block var="true"/><list></list></block></block></script><script><block s="doReport"><block s="evaluate"><block var="false"/><list></list></block></block></script></block></script></block-definition><block-definition s="for %&apos;i&apos; = %&apos;start&apos; to %&apos;end&apos; %&apos;action&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%upvar"></input><input type="%n">1</input><input type="%n">10</input><input type="%cs"></input></inputs><script><block s="doDeclareVariables"><list><l>step</l><l>tester</l></list></block><block s="doIfElse"><block s="reportGreaterThan"><block var="start"/><block var="end"/></block><script><block s="doSetVar"><l>step</l><l>-1</l></block><block s="doSetVar"><l>tester</l><block s="reifyReporter"><autolambda><block s="reportLessThan"><block var="i"/><block var="end"/></block></autolambda><list></list></block></block></script><script><block s="doSetVar"><l>step</l><l>1</l></block><block s="doSetVar"><l>tester</l><block s="reifyReporter"><autolambda><block s="reportGreaterThan"><block var="i"/><block var="end"/></block></autolambda><list></list></block></block></script></block><block s="doSetVar"><l>i</l><block var="start"/></block><block s="doUntil"><block s="evaluate"><block var="tester"/><list></list></block><script><block s="doRun"><block var="action"/><list></list></block><block s="doChangeVar"><l>i</l><block var="step"/></block></script></block></script></block-definition><block-definition s="join words %&apos;words&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%mult%txt"></input></inputs><script><block s="doWarp"><script><block s="doIf"><custom-block s="empty? %l"><block s="reportCDR"><block var="words"/></block></custom-block><script><block s="doReport"><block s="reportListItem"><l>1</l><block var="words"/></block></block></script></block><block s="doReport"><block s="reportJoinWords"><list><block s="reportListItem"><l>1</l><block var="words"/></block><l> </l><custom-block s="join words %mult%txt"><block s="reportCDR"><block var="words"/></block></custom-block></list></block></block></script></block></script></block-definition><block-definition s="list $arrowRight sentence %&apos;data&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doReport"><custom-block s="join words %mult%txt"><block var="data"/></custom-block></block></script></block></script></block-definition><block-definition s="sentence $arrowRight list %&apos;text&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%txt"></input></inputs><script><block s="doWarp"><script><block s="doReport"><block s="reportTextSplit"><block var="text"/><l><option>whitespace</option></l></block></block></script></block></script></block-definition><block-definition s="catch %&apos;tag&apos; %&apos;action&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%upvar"></input><input type="%cs"></input></inputs><script><block s="doCallCC"><block s="reifyScript"><script><block s="doSetVar"><l>tag</l><block var="cont"/></block><block s="doRun"><block var="action"/><list></list></block></script><list><l>cont</l></list></block></block></script></block-definition><block-definition s="throw %&apos;cont&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s">catchtag</input></inputs><script><block s="doRun"><block var="cont"/><list></list></block></script></block-definition><block-definition s="catch %&apos;tag&apos; %&apos;value&apos;" type="reporter" category="control"><header></header><code></code><inputs><input type="%upvar"></input><input type="%anyUE"></input></inputs><script><block s="doCallCC"><block s="reifyScript"><script><block s="doSetVar"><l>tag</l><block var="cont"/></block><block s="doReport"><block s="evaluate"><block var="value"/><list></list></block></block></script><list><l>cont</l></list></block></block></script></block-definition><block-definition s="throw %&apos;tag&apos; %&apos;value&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s">catchtag</input><input type="%s"></input></inputs><script><block s="doRun"><block var="tag"/><list><block var="value"/></list></block></script></block-definition><block-definition s="for each %&apos;item&apos; of %&apos;data&apos; %&apos;action&apos;" type="command" category="lists"><header></header><code></code><inputs><input type="%upvar"></input><input type="%l"></input><input type="%cs"></input></inputs><script><block s="doUntil"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doSetVar"><l>item</l><block s="reportListItem"><l>1</l><block var="data"/></block></block><block s="doRun"><block var="action"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><block s="doSetVar"><l>data</l><block s="reportCDR"><block var="data"/></block></block></script></block></script></block-definition><block-definition s="if %&apos;test&apos; do %&apos;action&apos; and pause all $pause-1-255-220-0" type="command" category="control"><header></header><code></code><inputs><input type="%boolUE"></input><input type="%cs"></input></inputs><script><block s="doDeclareVariables"><list><l>breakpoint</l></list></block><block s="doIf"><block s="evaluate"><block var="test"/><list></list></block><script><block s="doSetVar"><l>breakpoint</l><block var="test"/></block><block s="doShowVar"><l>breakpoint</l></block><block s="doRun"><block var="action"/><list></list></block><block s="doPauseAll"></block><block s="doHideVar"><l></l></block></script></block></script></block-definition><block-definition s="word $arrowRight list %&apos;word&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%txt"></input></inputs><script><block s="doWarp"><script><block s="doReport"><block s="reportTextSplit"><block var="word"/><l><option>letter</option></l></block></block></script></block></script></block-definition><block-definition s="ignore %&apos;x&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s"></input></inputs></block-definition><block-definition s="tell %&apos;sprite&apos; to %&apos;action&apos;" type="command" category="control"><header></header><code></code><inputs><input type="%s">Sprite</input><input type="%cs"></input></inputs><script><block s="doRun"><block s="reportAttributeOf"><block var="action"/><block var="sprite"/></block><list></list></block></script></block-definition><block-definition s="ask %&apos;sprite&apos; for %&apos;expression&apos;" type="reporter" category="control"><header></header><code></code><inputs><input type="%s">Sprite</input><input type="%repRing"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportAttributeOf"><block var="expression"/><block var="sprite"/></block><list></list></block></block></script></block-definition><block-definition s="list $arrowRight word %&apos;list&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doReport"><block s="reportJoinWords"><block var="list"/></block></block></script></block></script></block-definition><block-definition s="$robot colors seen by %&apos;gate&apos;" type="reporter" category="sensing"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="ask %s for %repRing"><block var="gate"/><block s="reifyReporter"><autolambda><custom-block s="$robot get detected balls in conveyor"></custom-block></autolambda><list></list></block></custom-block></block></script><scripts><script x="51" y="108"><block s="doReport"><block s="reportNewList"><list><l>blue</l><l>blue</l><l>red</l></list></block></block></script></scripts></block-definition><block-definition s="average %&apos;colors&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>rgb</l></list></block><block s="doSetVar"><l>rgb</l><block s="reportNewList"><list><l>0</l><l>0</l><l>0</l></list></block></block><custom-block s="for each %upvar of %l %cs"><l>item</l><block var="colors"/><script><block s="doReplaceInList"><custom-block s="index of %s in %l"><block var="item"/><block s="reportNewList"><list><l>red</l><l>green</l><l>blue</l></list></block></custom-block><block var="rgb"/><block s="reportSum"><block s="reportListItem"><custom-block s="index of %s in %l"><block var="item"/><block s="reportNewList"><list><l>red</l><l>green</l><l>blue</l></list></block></custom-block><block var="rgb"/></block><l>1</l></block></block></script></custom-block><block s="doDeclareVariables"><list><l>max</l><l>c</l></list></block><block s="doSetVar"><l>max</l><l>0</l></block><custom-block s="for each %upvar of %l %cs"><l>item</l><block var="rgb"/><script><block s="doIf"><block s="reportGreaterThan"><block var="item"/><block var="max"/></block><script><block s="doSetVar"><l>max</l><block var="item"/></block><block s="doSetVar"><l>c</l><block s="reportListItem"><custom-block s="index of %s in %l"><block var="item"/><block var="rgb"/></custom-block><block s="reportNewList"><list><l>red</l><l>green</l><l>blue</l></list></block></block></block></script></block></script></custom-block><block s="doReport"><block var="c"/></block></script></block-definition><block-definition s="$robot get detected balls in conveyor" type="reporter" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportTextSplit"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/primitive/</l><l>colored_balls_detection</l><l>/get/</l><l>json_balls</l></list></block></block><l>;</l></block></block></script><scripts><script x="243" y="156"><block s="doReport"><block s="reportNewList"><list><l>blue</l><l>blue</l><l>red</l></list></block></block></script></scripts></block-definition><block-definition s="$turtle get nodes" type="reporter" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doDeclareVariables"><list><l>request</l></list></block><block s="doSetVar"><l>request</l><block s="reportURL"><custom-block s="$turtle thymio URL of node %txt"><l></l></custom-block></block></block><block s="doReport"><custom-block s="remove duplicates from %l"><custom-block s="append %mult%l"><list><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><custom-block s="Query %s from %l"><l>name</l><l/></custom-block></autolambda><list></list></block><list><custom-block s="listify %s"><block var="request"/></custom-block></list></custom-block><custom-block s="map %repRing over %mult%l"><block s="reifyReporter"><autolambda><custom-block s="Query %s from %l"><l>node</l><l/></custom-block></autolambda><list></list></block><list><custom-block s="listify %s"><block var="request"/></custom-block></list></custom-block></list></custom-block></custom-block></block></script></block-definition><block-definition s="Query %&apos;key&apos; from %&apos;KVs&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%s"></input><input type="%l"></input></inputs><script><block s="doReport"><block s="reportListItem"><l>2</l><block s="reportListItem"><l>1</l><custom-block s="keep items such that %predRing from %l"><block s="reifyPredicate"><autolambda><block s="reportEquals"><block var="key"/><block s="reportListItem"><l>1</l><l/></block></block></autolambda><list></list></block><block var="KVs"/></custom-block></block></block></block></script></block-definition><block-definition s="listify %&apos;jsonString&apos;" type="reporter" category="operators"><header></header><code></code><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>jsonString</l></list><l>return listify(JSON.parse(jsonString));&#xD;&#xD;function listify(jsonObject) {&#xD;  if (jsonObject instanceof Array) {&#xD;    return new List(jsonObject.map(function(eachElement) { return listify(eachElement)}));&#xD;  } else if (jsonObject instanceof Object) {&#xD;    return new List(Object.keys(jsonObject).map(function(eachKey) { return new List([eachKey,listify(jsonObject[eachKey])])} ))&#xD;  } else {&#xD;    return jsonObject&#xD;  }&#xD;}</l></block><list><block var="jsonString"/></list></block></block></script></block-definition><block-definition s="$robot contact" type="predicate" category="sensing"><header></header><code></code><inputs></inputs><script><block s="doReport"><block s="reportEquals"><block s="reportURL"><block s="reportJoinWords"><list><custom-block s="$robot robot URL"></custom-block><l>/motor/</l><l>contact</l><l>/get/</l><l>contact</l></list></block></block><l>True</l></block></block></script></block-definition></blocks><variables><variable name="thymio"></variable></variables></project>